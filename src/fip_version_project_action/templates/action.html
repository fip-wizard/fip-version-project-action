<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>FIP Wizard: Version</title>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

  <script>
      const ROOT_PATH = "{{ ROOT_PATH }}";
  </script>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"
          integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
          integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
          crossorigin="anonymous"></script>
  <script src="https://unpkg.com/@ds-wizard/integration-sdk/lib/index.js"></script>
  <script src="static/action.js"></script>
  <style>
      body {
          padding: 1em;
      }
      body > div.container {
          max-width: 600px;
          margin: auto;
      }
      #loader {
          display: flex;
          justify-content: center;
          align-items: center;
          padding: 1em;
          flex-direction: column;
      }
      #processing-container {
          display: flex;
          justify-content: center;
          align-items: center;
          padding: 1em;
          flex-direction: row;
          gap: 1em;
      }
      #processing-text {
          flex-grow: 1;
          padding: 0.5em;
      }
      .buttons {
          margin-top: 1em;
          display: flex;
          flex-direction: row-reverse;
          justify-content: space-between;
          gap: 0.5em;
      }
  </style>
</head>
<body>
<div class="container">
  <div id="loader">
    <div class="spinner-border" style="width: 4rem; height: 4rem;" role="status">
      <span class="sr-only">Loading...</span>
    </div>
    <br>
    <div class="loading-text">
      <p>Loading project information and submitted FIP nanopublications...</p>
    </div>
  </div>

  <div id="content" style="display: none;">
    <dl>
      <dt>Latest submitted version:</dt>
      <dd id="latest-version">unknown</dd>

      <dt>Current version in questionnaire:</dt>
      <dd id="current-version">unknown</dd>
    </dl>

    <div class="form-group">
      <label class="control-label">Desired version:</label>
      <div class="version-inputs">
        <input type="number" class="form-control version-part" min="0" name="version-major" id="version-major">.<input type="number" class="form-control version-part" min="0" name="version-minor" id="version-minor">.<input type="number" class="form-control version-part" min="0" name="version-patch" id="version-patch">
      </div>

      <div id="warning" style="display: none;">
        <div class="alert alert-warning" role="alert"><strong>Warning</strong>: The desired version must be higher than the latest submitted
          version.</div>
      </div>

      <p class="form-text text-muted version-suggestions">Suggestions:
      </p>
        <ul>
          <li><a id="suggest-major" class="suggestion">0.0.0</a> = if you introduced <strong>major</strong> changes in your FIP,</li>
          <li><a id="suggest-minor" class="suggestion">0.0.0</a> = if you updated some declarations resulting in <strong>minor</strong> changes,</li>
          <li><a id="suggest-patch" class="suggestion">0.0.0</a> = if you just fixed some error such as typos to <strong>patch</strong> your FIP.</li>
        </ul>
      <p class="form-text text-muted">The version number is in format X.Y.Z. Increasing number Z indicates only some
        fixes, number Y minor changes, and number X indicates a major change.</p>
    </div>
<!--
    <div class="form-group">
      <label class="control-label" for="version-description">Version description (optional):</label>
      <textarea class="form-control" id="version-description" rows="3" placeholder="Describe the changes you made in this version..."></textarea>
    </div>
-->

    <div id="processing" style="display:none">
      <div id="processing-container" class="alert alert-warning">
      <div class="spinner-border" style="width: 3rem; height: 3rem;" role="status">
        <span class="sr-only"></span>
      </div>
      <div id="processing-text">Processing... Please wait.</div>
        </div>
    </div>

    <div class="buttons">
      <button id="btn-submit" class="btn btn-primary">Save and Submit as Nanopublication</button>
      <button id="btn-confirm" class="btn btn-primary">Save version</button>
      <button id="btn-cancel" class="btn btn-secondary">Close</button>
    </div>
  </div>

  <div id="error" style="display: none;">
    <p>Error: <span id="error-message"></span></p>
    <button id="btn-close" class="btn btn-secondary">Close</button>
  </div>
</div>
</body>
</html>
